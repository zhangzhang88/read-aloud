# Read Aloud 0.1.0

一个基于 LibreTTS 原理开发的 Chrome 插件，直接在浏览器中调用 TTS 服务，将网页或手动输入的文本实时朗读出来。UI 延续 Read Aloud：文本语音朗读助理的工作流，支持一键抓取当前选中内容、调节语速/音调、多语音切换以及暗黑模式。

## 功能

- 🔊 直接在插件弹窗中播放 TTS 生成的音频，无需额外服务端
- ✍️ 一键抓取当前标签页的选中文本，文本框和预览合二为一并高亮当前句子
- 🎚️ 语速 / 音调滑杆即时调节，偏好自动存储
- 🗣️ 内置常用中英文语音列表，可扩展 `voices.json` 自定义
- 💾 使用 `chrome.storage.sync / local` 记住语音、参数、主题与上次朗读内容
- 🖱️ 选中文本后右键点击「朗读所选文本」即可自动触发弹窗朗读
- 🐦 Twitter/X 每条推文右上角都会出现朗读按钮，一键即可朗读推文内容
- ✨ 朗读时后台按句自动分段、生成完即播，失败自动重试，播放结束后合成完整音频保证总时长
- 🌙 暗黑模式随手切换、自动记忆

## 目录结构

```
read-aloud/
├── manifest.json        # Chrome 插件清单 (Manifest v3)
├── popup.html           # 弹窗 UI
├── popup.css            # UI 样式（含暗黑模式变量）
├── popup.js             # 交互逻辑、分段播放、右键联动
├── edgeTtsClient.js     # 复用 LibreTTS 的 edge-tts 请求流程
├── background.js        # 上下文菜单、自动朗读请求
├── voices.json          # 预置讲述人列表
└── README.md
```

## 使用方式

1. 打开 Chrome 的扩展程序管理页面 (chrome://extensions)
2. 右上角开启「开发者模式」
3. 点击「加载已解压的扩展程序」，指向 `read-aloud` 文件夹
4. 浏览器工具栏会出现 Read Aloud 图标：
   - 首次点击图标会打开一个独立的控制窗口，窗口始终保持在屏幕上，除非再次点击图标才会关闭，由此可以在后台继续播放音频。
   - 如果浏览器询问是否允许此扩展在所有网站上运行或使用自定义图标，请选择允许以确保朗读和右键菜单可用。

## 使用说明

### 弹窗操作

1. 在网页中选中一段文本，点击窗口里的「获取选中文本」，输入框会自动填充；也可以直接在输入框中键入或粘贴内容。
2. 通过下拉框选择讲述人，拖动滑杆设置语速/音调。所有设置会自动保存，下次打开保持一致。
3. 点击「朗读」：插件将文本按句拆分、逐句调用 TTS，第一句生成完就自动播放，其余句子在后台排队和重试。
4. 「暂停」用于暂停或恢复播放；「清空」会立即停止播放并清空文本。
5. 播放结束后，底部播放器会自动拼接整个音频，进度条显示完整时长，方便重复收听或拖动定位。
6. 右上角可切换暗黑模式；偏好保存在 `chrome.storage.local` 中。

### 右键朗读

1. 选中文本后，点击浏览器默认的右键菜单里的「朗读所选文本」。
2. 插件会自动填充并执行与点击「朗读」相同的流程，控制窗口（若未打开）会自动弹出并保持在后台。

### Twitter/X 推文按钮

1. 打开 `twitter.com` 或 `x.com` 时，每一条推文右上角会出现一个 🔊 图标。
2. 点击该按钮即可提取该推文的纯文本内容并触发朗读，适合无需选中也能快速收听。

> 如果需要更多语音，只需在 `voices.json` 中添加新的语音 ID 与名称即可。

> 如果需要更多语音，只需在 `voices.json` 中添加新的语音 ID 与名称即可。

## 后续可扩展想法

- 继续扩展语音来源，支持本地模型或更多云端 TTS
- 在播放网页原文时同步高亮页面内的文本，实现逐句跟读
- 支持导出合成后的 MP3/WAV
- 提供批量朗读、书签朗读等高级场景
